#### 5. 개수 비교하기 (count-comparison)

##### 목표

화면의 왼쪽과 오른쪽에 제시된 단어 중 개수가 더 많은 단어를 선택한다. 이를 통해 플레이어의 인지능력을 평가한다.

##### 진행 방식

자세한 개수 비교하기 게임의 진행방식은 다음과 같다.

1. 화면의 왼쪽과 오른쪽에 각각 단어 구름(word cloud)이 제시된다. 각 단어 구름은 같은 단어로 구성되어 있다. 각 단어 구름을 구성하는 단어들의 크기와 배치는 랜덤하게 섞여있다.
2. 예를 들어, 왼쪽에는 '강아지'라는 단어로만 구성된 단어 구름이 제시되고, 오른쪽에는 '고양이'이라는 단어로만 구성된 단어 구름이 제시되었을 때, 각 단어구름을 구성하는 단어들의 배치와 글씨의 크기 및 두께는 랜덤하다.
3. 플레이어는 짧은 제시 시간 동안 단어 구름의 모양, 개별 단어의 크기와 무관하게 왼쪽과 오른쪽의 단어 구름에 속한 단어 구름의 개수만을 파악한다.
4. 제시 시간이 끝나면 플레이어는 짧은 제한시간 내에 어떤 단어가 더 많았는지를 선택한다.
5. 예를 들어, 왼쪽의 '강아지' 단어 구름의 각 단어들의 글씨가 더 크고, 넓게 배치되어 있어 단어 구름 자체가 더 커보이지만 실제 '강아지' 단어의 개수가 30개이고, 오른쪽의 '고양이' 단어 구름의 각 단어들의 글씨가 더 작고, 조밀하게 배치되어 있어 단어 구름 자체가 더 작아보이지만 실제 '고양이' 단어의 개수가 40개일 때, 플레이어는 '고양이'를 더 많은 것으로 선택해야 한다.

##### 제한 사항

단어 구름 세트가 제시되는 시간은 짧게 제한된다. 즉, 플레이어는 짧게 제시되는 두 단어구름을 빠르게 살펴보고 어느쪽의 단어가 더 많은지 파악해야 한다.

제시 시간이 끝나면 두 단어 중 어떤 단어가 더 많았는지 선택하게 되는데, 여기서도 짧은 제한시간이 적용된다. 즉, 제한 시간이 3초인 경우, 플레이어는 3초 이내에 왼쪽 단어와 오른쪽 단어 중 더 많다고 판단한 쪽을 선택해야 한다.

제한시간 내에 선택을 하지 못한 경우에는 틀린 것으로 판단한다.

##### 데이터의 저장 및 분석

게임의 결과 데이터는,

- 수행한 게임 당
- 문제에 적용된 함정
- 입력에 걸리는 시간
- 플레이어의 선택 및 답안

에 대해 플레이어의 정답률과 오답률, 판단에 걸리는 시간과 어떤 유형에 약한지 분석할 수 있도록 저장한다.

이를 통해, 플레이어가 글씨 크기, 글씨 두께, 단어 구름의 조밀도 및 단어의 배치 등 어떤 함정에 약한지, 판단 시간과 정답률 및 오답률 사이의 상관관계는 어떠한지 등을 분석하고 피드백을 제공해야 한다.

##### 연습게임 개발 방향

단어 조합은 `data/word_list.json` 파일에 미리 정의된 반의어 및 연관어 목록을 사용한다.

문제를 만들 때, 단어 조합을 가능한 한 중복되지 않게 선택한다. 단어 조합의 숫자보다 출제해야 하는 문제의 개수가 많을 경우, 중복되는 조합은 문제 순서에서 서로 멀리 배치하여 플레이어가 중복을 느끼지 못하게 한다.

문제를 위해 단어 조합이 선택되면, 각 단어를 왼쪽에 배치할지 오른쪽에 배치할지 랜덤하게 선택한다.

단어의 배치가 선택되면, 단어 구름을 구성할 각 단어의 개수를 정규 분포를 활용하여 선택한다. 먼저 문제 난이도에 따라 단어 개수의 평균(mean)을 랜덤하게 정한다. 그 후, 난이도에 따라 분산(variance)의 크기를 조절한다. 예를 들어, 낮은 난이도에서는 분산을 평균의 50%로, 높은 난이도에서는 10%로 설정한다. 이 정규분포 `N(mean, variance)`에서 두 개의 숫자를 랜덤하게 추출하여 각 단어의 개수로 할당한다. 만약 두 숫자가 동일하게 나올 경우, 한 쪽에 임의의 값을 더해 개수를 다르게 만든다. 단어 개수의 하한은 5개, 상한은 50개로 제한한다.

개수가 선택되고 나면, 문제에 적용할 함정을 선택한다. 함정은 단어의 개수가 적은 쪽이 시각적으로 더 많아 보이도록 하는 장치이다. 함정의 종류와 적용 방식은 다음과 같으며, 여러 함정이 동시에 적용될 수 있다.

- **글자 크기**: 각 단어의 글자 크기는 1rem을 기준으로 0.5rem ~ 2rem 사이에서 랜덤하게 부여된다. 함정이 적용될 경우, 단어 수가 적은 쪽에 큰 글씨(1.5rem 이상)를 가진 단어의 비율을 약 10% 더 높게 설정한다.
- **글자 두께**: 각 단어의 글자 두께는 400(normal)을 기준으로 랜덤하게 부여된다. 함정이 적용될 경우, 단어 수가 적은 쪽에 두꺼운 글씨(700 이상)를 가진 단어의 비율을 약 10% 더 높게 설정한다.
- **조밀도**: 함정이 적용될 경우, 단어 수가 적은 쪽의 단어 구름이 차지하는 전체 면적을 약 1.3배 더 넓게 설정한다.

이 수치들은 초기 설정값이며, 테스트를 통해 지속적으로 조절해나간다.

함정도 선택되고 나면, Go 백엔드는 문제 데이터를 프론트엔드로 전송한다. 데이터에는 단어 조합, 좌우 배치, 각 단어의 개수, 적용된 함정 정보 등이 포함된다.

단어 구름은 프론트엔드에서 생성한다. 먼저 기존에 프로젝트에서 사용 중인 라이브러리나 직접 구현으로 해결 가능한지 검토한다. 만약 구현이 복잡하거나 비효율적일 경우, `visx`와 같은 외부 라이브러리를 도입하여 처리한다.

게임의 설정화면에서 플레이어는 단어 구름의 제시 시간, 입력 제한시간, 실전 모드 등을 선택하여 연습 게임을 구성할 수 있다.

- **단어 구름 제시 시간**: 0.5초 ~ 3초 (기본값 1초)
- **입력 제한시간**: 1초 ~ 10초 (기본값 3초)
- **실전 모드**: 선택 시 정답/오답 즉각 피드백 비활성화

게임 플레이에서는, 각 문제가 출제되기 전 짧은 빈 화면이 나타난 후, 두 개의 단어 구름이 제시된다. 왼쪽과 오른쪽 단어 구름 사이에는 경계선으로 명확히 구분한다. 단어 구름이 제시되는 순간부터 제시 시간 타이머가 작동하고, 시간이 다 되면 입력 화면으로 전환된다.

입력 화면에서는 왼쪽과 오른쪽에 두 단어가 적힌 선택 카드를 보여준다. 제한 시간의 흐름을 보여주는 프로그레스 바가 표시되며, 사용자는 제한 시간 내에 더 많다고 생각하는 단어 카드를 클릭하여 답을 제출한다.

제출이 끝나면 다시 빈 화면이 나타나고 다음 문제가 출제된다. 모든 문제가 출제되면 게임 종료 화면으로 이동한다.

