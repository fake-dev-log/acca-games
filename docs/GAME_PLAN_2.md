#### 5. 개수 비교하기 (count-comparison)

##### 목표

화면의 왼쪽과 오른쪽에 제시된 단어 중 개수가 더 많은 단어를 선택한다. 이를 통해 플레이어의 인지능력을 평가한다.

##### 진행 방식

자세한 개수 비교하기 게임의 진행방식은 다음과 같다.

1. 화면의 왼쪽과 오른쪽에 각각 단어 구름(word cloud)이 제시된다. 각 단어 구름은 같은 단어로 구성되어 있다. 각 단어 구름을 구성하는 단어들의 크기와 배치는 랜덤하게 섞여있다.
2. 예를 들어, 왼쪽에는 '강아지'라는 단어로만 구성된 단어 구름이 제시되고, 오른쪽에는 '고양이'이라는 단어로만 구성된 단어 구름이 제시되었을 때, 각 단어구름을 구성하는 단어들의 배치와 글씨의 크기 및 두께는 랜덤하다.
3. 플레이어는 짧은 제시 시간 동안 단어 구름의 모양, 개별 단어의 크기와 무관하게 왼쪽과 오른쪽의 단어 구름에 속한 단어 구름의 개수만을 파악한다.
4. 제시 시간이 끝나면 플레이어는 짧은 제한시간 내에 어떤 단어가 더 많았는지를 선택한다.
5. 예를 들어, 왼쪽의 '강아지' 단어 구름의 각 단어들의 글씨가 더 크고, 넓게 배치되어 있어 단어 구름 자체가 더 커보이지만 실제 '강아지' 단어의 개수가 30개이고, 오른쪽의 '고양이' 단어 구름의 각 단어들의 글씨가 더 작고, 조밀하게 배치되어 있어 단어 구름 자체가 더 작아보이지만 실제 '고양이' 단어의 개수가 40개일 때, 플레이어는 '고양이'를 더 많은 것으로 선택해야 한다.

##### 제한 사항

단어 구름 세트가 제시되는 시간은 짧게 제한된다. 즉, 플레이어는 짧게 제시되는 두 단어구름을 빠르게 살펴보고 어느쪽의 단어가 더 많은지 파악해야 한다.

제시 시간이 끝나면 두 단어 중 어떤 단어가 더 많았는지 선택하게 되는데, 여기서도 짧은 제한시간이 적용된다. 즉, 제한 시간이 3초인 경우, 플레이어는 3초 이내에 왼쪽 단어와 오른쪽 단어 중 더 많다고 판단한 쪽을 선택해야 한다.

제한시간 내에 선택을 하지 못한 경우에는 틀린 것으로 판단한다.

##### 데이터의 저장 및 분석

게임의 결과 데이터는,

- 수행한 게임 당
- 문제에 적용된 함정
- 입력에 걸리는 시간
- 플레이어의 선택 및 답안

에 대해 플레이어의 정답률과 오답률, 판단에 걸리는 시간과 어떤 유형에 약한지 분석할 수 있도록 저장한다.

이를 통해, 플레이어가 글씨 크기, 글씨 두께, 단어 구름의 조밀도 및 단어의 배치 등 어떤 함정에 약한지, 판단 시간과 정답률 및 오답률 사이의 상관관계는 어떠한지 등을 분석하고 피드백을 제공해야 한다.

##### 연습게임 개발 방향

단어 조합은 `data/word_list.json` 파일에 미리 정의된 반의어 및 연관어 목록을 사용한다.

문제를 만들 때, 단어 조합을 가능한 한 중복되지 않게 선택한다. 단어 조합의 숫자보다 출제해야 하는 문제의 개수가 많을 경우, 중복되는 조합은 문제 순서에서 서로 멀리 배치하여 플레이어가 중복을 느끼지 못하게 한다.

문제를 위해 단어 조합이 선택되면, 각 단어를 왼쪽에 배치할지 오른쪽에 배치할지 랜덤하게 선택한다.

단어의 배치가 선택되면, 단어 구름을 구성할 각 단어의 개수를 정규 분포를 활용하여 선택한다. 먼저 문제 난이도에 따라 단어 개수의 평균(mean)을 랜덤하게 정한다. 그 후, 난이도에 따라 분산(variance)의 크기를 조절한다. 예를 들어, 낮은 난이도에서는 분산을 평균의 50%로, 높은 난이도에서는 10%로 설정한다. 이 정규분포 `N(mean, variance)`에서 두 개의 숫자를 랜덤하게 추출하여 각 단어의 개수로 할당한다. 만약 두 숫자가 동일하게 나올 경우, 한 쪽에 임의의 값을 더해 개수를 다르게 만든다. 단어 개수의 하한은 5개, 상한은 50개로 제한한다.

개수가 선택되고 나면, 문제에 적용할 함정을 선택한다. 함정은 단어의 개수가 적은 쪽이 시각적으로 더 많아 보이도록 하는 장치이다. 함정의 종류와 적용 방식은 다음과 같으며, 여러 함정이 동시에 적용될 수 있다.

- **글자 크기**: 각 단어의 글자 크기는 1rem을 기준으로 0.5rem ~ 2rem 사이에서 랜덤하게 부여된다. 함정이 적용될 경우, 단어 수가 적은 쪽에 큰 글씨(1.5rem 이상)를 가진 단어의 비율을 약 10% 더 높게 설정한다.
- **글자 두께**: 각 단어의 글자 두께는 400(normal)을 기준으로 랜덤하게 부여된다. 함정이 적용될 경우, 단어 수가 적은 쪽에 두꺼운 글씨(700 이상)를 가진 단어의 비율을 약 10% 더 높게 설정한다.
- **조밀도**: 함정이 적용될 경우, 단어 수가 적은 쪽의 단어 구름이 차지하는 전체 면적을 약 1.3배 더 넓게 설정한다.

이 수치들은 초기 설정값이며, 테스트를 통해 지속적으로 조절해나간다.

함정도 선택되고 나면, Go 백엔드는 문제 데이터를 프론트엔드로 전송한다. 데이터에는 단어 조합, 좌우 배치, 각 단어의 개수, 적용된 함정 정보 등이 포함된다.

단어 구름은 프론트엔드에서 생성한다. 먼저 기존에 프로젝트에서 사용 중인 라이브러리나 직접 구현으로 해결 가능한지 검토한다. 만약 구현이 복잡하거나 비효율적일 경우, `visx`와 같은 외부 라이브러리를 도입하여 처리한다.

게임의 설정화면에서 플레이어는 단어 구름의 제시 시간, 입력 제한시간, 실전 모드 등을 선택하여 연습 게임을 구성할 수 있다.

- **단어 구름 제시 시간**: 0.5초 ~ 3초 (기본값 1초)
- **입력 제한시간**: 1초 ~ 10초 (기본값 3초)
- **실전 모드**: 선택 시 정답/오답 즉각 피드백 비활성화

게임 플레이에서는, 각 문제가 출제되기 전 짧은 빈 화면이 나타난 후, 두 개의 단어 구름이 제시된다. 왼쪽과 오른쪽 단어 구름 사이에는 경계선으로 명확히 구분한다. 단어 구름이 제시되는 순간부터 제시 시간 타이머가 작동하고, 시간이 다 되면 입력 화면으로 전환된다.

입력 화면에서는 왼쪽과 오른쪽에 두 단어가 적힌 선택 카드를 보여준다. 제한 시간의 흐름을 보여주는 프로그레스 바가 표시되며, 사용자는 제한 시간 내에 더 많다고 생각하는 단어 카드를 클릭하여 답을 제출한다.

제출이 끝나면 다시 빈 화면이 나타나고 다음 문제가 출제된다. 모든 문제가 출제되면 게임 종료 화면으로 이동한다.


#### 6. 고양이 술래잡기

##### 목표

생쥐 무리가 등장하는 위치를 기억하고, 이어 제시되는 고양이 무리의 위치를 기억하여 고양이가 생쥐를 잡았는지 판단한다. 이를 통해 플레이어의 작업기억을 평가한다.

##### 진행 방식

자세한 고양이 술래잡기 게임의 진행방식은 다음과 같다.

1. 6x6 그리드가 제시된다.
2. 짧은 시간동안 임의의 칸에 임의의 수의 생쥐가 나타난다. 생쥐의 수는 최소 4마리에서 최대 16마리까지 난이도에 따라 점차 증가한다.
3. 짧은 시간동안 임의의 칸에 생쥐와 같은 수의 고양이가 나타난다. 고양이의 위치는 생쥐와 같거나 다를 수 있다. 생쥐와 같은 칸에 나타난 고양이는 생쥐를 '잡았다'고 하고, 다른 칸에 나타난 고양이는 생쥐를 '놓쳤다'고 한다. 고양이가 나타난 직후(약 0.5초) 고양이 중 두 마리가 임의로 선택되어, 한 마리는 빨간색, 다른 한 마리는 파란색으로 지정된다.
4. 고양이 제시가 종료 되면, 선택 화면으로 넘어간다. 선택 화면에서 플레이어는 빨간색 고양이, 파란색 고양이 순서로 해당 고양이가 생쥐를 잡았는지 놓쳤는지를 판단한다. 판단은 왼쪽이 "놓쳤다", 오른쪽이 "잡았다"이며, 각 구획은 "불확실하다", "조금 확실하다", "확실하다", "매우 확실하다" 4개의 단계로 나뉘며 왼쪽과 오른쪽으로 향할수록 확실함의 정도가 증가하게 배치된다.
5. 플레이어의 선택의 정답 여부와 확신 정도에 따라 점수를 차등 부여 한다. 예를 들어, 빨간색 고양이가 생쥐를 잡았을 때, 플레이어가 '놓쳤다'에서 '매우 확실하다'를 선택할 경우 최저점을 받게 된다. 반대로 '잡았다'에서 '매우 확실하다'를 선택할 경우 최고점을 받는다.
6. 점수의 기준은 오답에 대해 -1점, 정답에 대해 +1점이며, 확신에 따른 계수는 '불확실하다'(0.1), '조금 확실하다'(0.5), '확실하다'(1), '매우 확실하다'(2) 로 구성한다.

##### 제한 사항

빈 그리드에서 생쥐가 제시되는 시간은 1초, 고양이가 제시되는 시간은 1.5초로 구성하고 이 시간에는 빨간색, 파란색 고양이가 배정되는 시간이 포함된다. 고양이가 제시된 다음 0.5초 이후 빨간색과 파란색 고양이가 배정된다.

고양이의 제시 시간이 끝나면 플레이어는 빨간색, 파란색 고양이의 순서로 해당 고양이가 쥐를 잡았는지 여부와 자신의 확신의 단계에 대해 응답해야 한다. 응답에는 3초의 제한시간이 주어진다.  

제한시간 내에 선택을 하지 못한 경우에는 틀린 것으로 판단하여 -1점을 부여한다.

##### 데이터의 저장 및 분석

게임의 결과 데이터는,

- 수행한 게임 당
- 난이도(생쥐의 수) 별
- 입력에 걸리는 시간
- 플레이어의 선택 및 답안

에 대해 플레이어의 정답률과 오답률, 판단에 걸리는 시간과 확신의 정도를 분석할 수 있도록 저장한다.

이를 통해, 플레이어가 난이도에 따라 얼만큼 확신을 가지는지, 판단 시간과 정답률 및 오답률 사이의 상관관계는 어떠한지 등을 분석하고 피드백을 제공해야 한다.

##### 연습게임 개발 방향

문제 화면과 판단 화면으로 화면을 구분하여 개발한다.

문제 화면은 6x6 그리드가 중앙에 있는 화면으로, 빈 그리드에 생쥐가 나타나고, 다시 빈 그리드로 갱신되었다가 고양이가 뒤이어 나타나야 한다. 고양이가 제시된 다음 0.5초의 시간이 지나면 고양이 중 2마리의 배경 색이 동시에 바뀐다. 한 마리는 빨간색 배경으로, 다른 한마리는 파란색 배경으로 지정한다.

제시가 끝나면 판단 화면으로 넘어간다.

판단 화면은 좌우로 넓은 형태로 구성한다. 화면 상단에는 제한시간(3초)를 나타내는 time progress bar 가 시간이 줄어들고 있음을 나타낸다. 그 아래에는 빨간색 고양이인지, 파란색 고양이인지를 표현하는 사각형의 그리드 하나가 존재해야 한다. 해당 그리드는 문제 화면의 그리드 중 하나를 재활용한다.

좌우로 넓은 형태의 판단 화면에는 '<-(왼쪽 화살표) 놓쳤다'와 '잡았다 ->(오른쪽 화살표)' 가 화면 좌우에 각각 표시되고, 그 아래에는 4단계의 확신 정도가 표시된다. 확신 정도는 왼편 부터 '매우 확실하다' 부터 '불확실하다' 까지 배치되고, 다시 '불확실하다'부터 '매우 확실하다'까지 배치되어 좌우 극단으로 갈수록 '놓쳤다' 및 '잡았다'에 대한 확신의 단계를 표시할 수 있게 한다.

문제의 난이도(생쥐의 수)는 게임 설정 단계에서 선택할 수 있도록 한다. 난이도는 총 6개 단계로 세분화하며, 4마리(1단계)부터 16마리(8단계)까지 단계가 증가함에 따라 생쥐가 2마리씩 추가되는 것으로 한다. 플레이어는 설정과정에서 난이도를 자동(선형 증가)으로 선택할 수도 있고, 난이도를 고정할 수도 있다. 자동 선택의 경우, 문제의 개수를 6개 구간으로 분할하여 각 구간에 따라 1단계부터 6단계까지 증가하게 한다. 예를 들어, 문제의 총 개수가 6개라면 1단계부터 6단계까지 한 문제씩 출제되고, 11개 문제라면 1~5단계는 2문제씩, 6단계는 1문제가 출제된다. 

백엔드에서는 생쥐의 위치와 고양이의 위치를 2차원 배열의 형태로 만들어서 문제를 만들고, 랜덤 인덱스로 2마리의 고양이를 뽑는다. 2마리의 고양이중 첫번째 고양이가 빨간색 고양이가 되고 두번째 고양이가 파란색 고양이가 되며, 생쥐 배열에서 각 고양이의 인덱스를 검사하여 생쥐가 존재하면 '잡았다'이고 없으면 '놓쳤다'이다.

백엔드에서는 생쥐의 위치와 고양이의 위치, 선택된 2마리의 고양이의 위치를 프론트엔드에 보낸다. 프론트엔드에서는 해당 위치 정보를 사용하여 화면에 생쥐와 고양이, 빨간색 파란색 고양이를 보여준다.

플레이어가 판단 화면에서 선택을 클릭하면 해당 응답은 백엔드로 제출되어 정오, 확신계수를 통해 계산된 점수가 기록된다.

게임의 설정화면에서 플레이어는 생쥐와 고양이의 제시시간, 응답 제한시간, 실전 모드 등을 선택하여 연습 게임을 구성할 수 있다.

- **생쥐와 고양이의 제시시간**: 0.5초 ~ 3초 (기본값 1초, 고양이의 경우는 배경 변환을 위해 0.5초를 추가한다.)
- **응답 제한시간**: 1초 ~ 10초 (기본값 3초)
- **실전 모드**: 선택 시 정답/오답 즉각 피드백 비활성화

제출이 끝나면 다시 빈 그리드로 구성된 문제 화면이 나타나고 다음 문제가 출제된다. 모든 문제가 출제되면 게임 종료 화면으로 이동한다.
